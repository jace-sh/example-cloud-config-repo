spring:
  jpa:
    open-in-view: false

fanstore:
  persistence:
    flyway:
      table: z_flyway_schema_history
      locations: classpath:ddl

---
spring.config.activate.on-profile: local
spring:
  #  sql:
  #    init:
  #      mode: always
  #      data-locations: classpath:sql/local-init-data.sql
  h2:
    console:
      enabled: true
      path: /h2-console
  jpa:
    show-sql: false
    generate-ddl: true
    hibernate:
      ddl-auto: create-drop
  #    defer-datasource-initialization: true # spring.sql.init 으로 data를 등록하기 위해선 이 mode가 true로 설정되어 있어야함

fanstore:
  persistence:
    flayway:
      enabled: true
      clean-disabled: true
    datasource:
      mongo: 
        authentication-database: admin
        url: mongodb+srv://fanstore:%21fans.dcja61%23@dev-etc-publicmongo-kor-001.kakaoent.io/fanstore?authSource=admin&retryWrites=true&w=majority&tls=false&ssl=false
      mysql:
        account-master:
          jdbc-url: jdbc:h2:mem:fanstore:account;NON_KEYWORDS=USER
          username: sa
          password:
          driver-class-name: org.h2.Driver

        order-master:
          jdbc-url: jdbc:h2:mem:fanstore:order;NON_KEYWORDS=USER
          username: sa
          password:
          driver-class-name: org.h2.Driver      

        mall-master:
          jdbc-url: jdbc:h2:mem:fanstore:mall;NON_KEYWORDS=USER
          username: sa
          password:
          driver-class-name: org.h2.Driver      

        verify-master:
          jdbc-url: jdbc:h2:mem:fanstore:verify;NON_KEYWORDS=USER
          username: sa
          password:
          driver-class-name: org.h2.Driver

---
spring.config.activate.on-profile: dev

spring:
  jpa:
    show-sql: false
    hibernate:
      ddl-auto: create-drop

fanstore:
  persistence:
    flayway:
      enabled: false
      clean-disabled: true
    datasource:
      mongo: 
        authentication-database: admin
        url: mongodb+srv://fanstore:%21fans.dcja61%23@dev-etc-publicmongo-kor-001.kakaoent.io/fanstore?authSource=admin&retryWrites=true&w=majority&tls=false&ssl=false
      mysql:
        account-master:
          jdbc-url: jdbc:mysql://dev-fanstore-db.kakaoent.io:3306/account?characterEncoding=utf8&serverTimezone=UTC&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true&innodb_large_prefix=ON
          username: fanstore
          password: fanstore123#
          driver-class-name: com.mysql.cj.jdbc.Driver

        order-master:
          jdbc-url: jdbc:mysql://dev-fanstore-db.kakaoent.io:3306/order?characterEncoding=utf8&serverTimezone=UTC&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true&innodb_large_prefix=ON
          username: fanstore
          password: fanstore123#
          driver-class-name: com.mysql.cj.jdbc.Driver   

        mall-master:
          jdbc-url: jdbc:mysql://dev-fanstore-db.kakaoent.io:3306/mall?characterEncoding=utf8&serverTimezone=UTC&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true&innodb_large_prefix=ON
          username: fanstore
          password: fanstore123#
          driver-class-name: com.mysql.cj.jdbc.Driver   

        verify-master:
          jdbc-url: jdbc:mysql://dev-fanstore-db.kakaoent.io:3306/verify?characterEncoding=utf8&serverTimezone=UTC&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true&innodb_large_prefix=ON
          username: fanstore
          password: fanstore123#
          driver-class-name: com.mysql.cj.jdbc.Driver   

---
spring.config.activate.on-profile: cbt, prod

# prod에선 절대 enabled:true 로 설정 하면 안됌!
fanstore:
  persistence:
    flayway:
      enabled: false
      clean-disabled: true
    datasource:
      mongo: 
        authentication-database: admin
        url: mongodb+srv://fanstore:%21fans.dcja61%23@dev-etc-publicmongo-kor-001.kakaoent.io/fanstore?authSource=admin&retryWrites=true&w=majority&tls=false&ssl=false
      mysql:
        account-master:
          jdbc-url: jdbc:mysql://dev-fanstore-db.kakaoent.io:3306/account?characterEncoding=utf8&serverTimezone=UTC&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true&innodb_large_prefix=ON
          username: fanstore
          password: fanstore123#
          driver-class-name: com.mysql.cj.jdbc.Driver
        account-slave:
          jdbc-url: jdbc:mysql://dev-fanstore-db.kakaoent.io:3306/account?characterEncoding=utf8&serverTimezone=UTC&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true&innodb_large_prefix=ON
          username: fanstore
          password: fanstore123#
          driver-class-name: com.mysql.cj.jdbc.Driver          

        order-master:
          jdbc-url: jdbc:mysql://dev-fanstore-db.kakaoent.io:3306/order?characterEncoding=utf8&serverTimezone=UTC&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true&innodb_large_prefix=ON
          username: fanstore
          password: fanstore123#
          driver-class-name: com.mysql.cj.jdbc.Driver   
        order-slave:
          jdbc-url: jdbc:mysql://dev-fanstore-db.kakaoent.io:3306/order?characterEncoding=utf8&serverTimezone=UTC&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true&innodb_large_prefix=ON
          username: fanstore
          password: fanstore123#
          driver-class-name: com.mysql.cj.jdbc.Driver             

        mall-master:
          jdbc-url: jdbc:mysql://dev-fanstore-db.kakaoent.io:3306/mall?characterEncoding=utf8&serverTimezone=UTC&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true&innodb_large_prefix=ON
          username: fanstore
          password: fanstore123#
          driver-class-name: com.mysql.cj.jdbc.Driver   
        mall-slave:
          jdbc-url: jdbc:mysql://dev-fanstore-db.kakaoent.io:3306/mall?characterEncoding=utf8&serverTimezone=UTC&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true&innodb_large_prefix=ON
          username: fanstore
          password: fanstore123#
          driver-class-name: com.mysql.cj.jdbc.Driver             

        verify-master:
          jdbc-url: jdbc:mysql://dev-fanstore-db.kakaoent.io:3306/verify?characterEncoding=utf8&serverTimezone=UTC&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true&innodb_large_prefix=ON
          username: fanstore
          password: fanstore123#
          driver-class-name: com.mysql.cj.jdbc.Driver   
        verify-slave:
          jdbc-url: jdbc:mysql://dev-fanstore-db.kakaoent.io:3306/verify?characterEncoding=utf8&serverTimezone=UTC&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true&innodb_large_prefix=ON
          username: fanstore
          password: fanstore123#
          driver-class-name: com.mysql.cj.jdbc.Driver                   

